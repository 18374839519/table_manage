<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.manage.field.mapper.ColumnTableRelMapper">
    <select id="getColumnReportTop10" resultType="com.manage.field.persistents.vo.ColumnReportVo">
        select * from (
        select t1.column_name columnName, t2.column_desc columnDesc, t2.status, count(t1.column_name) useCount
        from column_table_rel t1
        left join columns t2 on t1.column_name = t2.column_name
        where t2.type != 1
        group by t1.column_name, t2.column_desc, t2.status
        ) tab order by useCount desc limit 10
    </select>
</mapper>
